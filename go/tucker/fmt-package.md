# 5. fmt 패키지를 이용한 텍스트 입출력

## 5.1.2 서식 문자

* %v: 데이터 타입에 맞춰서 기본 형태로 출력
* %T: 데이터 타입 출력
* %t: 불리언 true/false 로 출력
* %d: 10진수 정숫값으로 출력 (정수 타입만 가능)
* %b: 2진수로 출력
* %o: 8진수로 출력
* %O: 앞에 8진수임을 표시하는 Oo를 붙여서 8진수로 값을 출력
* %x: 16진수로 값을 출력 10 이상 값을 a-f 소문자로 표시
* %X: 16진수로 값을 출력 10 이상 값을 a-f 대문자로 표시
* %e, %E: 지수 형태로 실숫값을 출력 (실수 타입만 가능)
* %f, %F: 지수 형태가 아닌 실숫값 그대로 출력 (실수 타입만 가능)
* %g, %G: 값이 큰 실숫값은 지수 형태(%e)로 출력하고, 작은 실숫값은 실숫값 그대로(%f)출력
* %s: 문자열 출력
* %q: 특수 문자 기능을 동작하지 않고 문자열 그대로 출력 (이스케이프 안됨 \t, \n)
* %p: 메모리 주솟값을 출력 (포인터)

## 5.3 키보드 입력과 Scan() 함수의 동작 원리

사용자가 표준 입력장치(PC에서는 키보드)로 입력하면 입력 데이터는 컴퓨터 내부에 **표준 입력 스트림**이라는 메모리 공간에 임시 저장된다. Scan() 함수들은 그 표준 입력 스트림에서 값을 읽어서 입력값을
처리한다.

표준 입력 스트림에서 스트림이란 흐름이란 뜻을 가지고 있다. 즉, 입력 데이터가 연속된 데이터 흐름 형태를 가지고 있다는 뜻이다 흘러간 물이 다시 흘러오지 않듯이 한 번 읽은 데이터를 다시 읽을 수는 없다. 데이터가
A 포인트에서 B 포인트로 흘러간다고 해서 파이프라고 부르기도 한다. 표준 입력 스트림의 작동 원리를 살펴보자.

```go
var a, b int
fmt.Scanln(&a, &b)
```

위와 같이 두 int 타입 입력을 받고자 할 때 사용자 "Hello 4"를 입력하고 `enter`키를 누르면 표준 입력 스트림에는 다음과 같이 데이터가 저장된다.

`\n` `4` ` ` `o` `l` `l` `e` `H` ` `

이때 가장 먼저 입력한 데이터부터 읽어오기 때문에 데이터가 거꾸로 저장된다. 먼저 입력된 데이터가 먼저 읽히는 데이터 구조를 `FIFO`라고 한다. 표준 입력 스트림은 바로 `FIFO`구조를 가지고 있다.

Scan() 함수는 먼저 표준 입력 스트림에서 한 글자를 읽어온다. 가장 먼저 입력된 글자가 먼저 읽히기 때문에 'H'를 읽어온다. 한번 읽은 데이터는 다시 읽어올 수 없기 대무에 표준 입력 스트림에서 한 글자를
빼온다고 생각할 수 있다.

그런 다음 읽어온 글자가 원하는 타입인지 판단한다. 이 경우 int 타입을 원햇지만 'H' 는 숫자가 아니기 때문에 Error 를 반환한다.

표준 입력 스트림에서 한 글자만 읽어왔기 때문에 표준 입력 스트림에는 "ello 4\n" 데이터가 그대로 남아있다. 그 상태에서 다시 Scanln()이 호출됐을 때 새로운 입력을 받는게 아니라 기존에 남아있는 표준
입력 스트림에서 다시 값을 가져오기 때문에 'e' 를 가져오게 되고 역시 숫자가 아니기 때문에 또 다시 발 에러를 반환한다.

```go
package main

import (
	"bufio" // io를 담당하는 패키지
	"fmt"
	"os" // 표준 입출력 등을 가지고 있는 패키지
)

func main() {
	stdin := bufio.NewReader(os.Stdin) // 표준 입력을 읽는 객체 생성 (표준 입력 스트림을 나타내는 os.Stdin을 사용해서 Reader 객체 생성)

	var a, b int // 둘 다 int

	n, err := fmt.Scanln(&a, &b)

	if err != nil { // 에러 발생 시
		fmt.Println(err)       // 에러 출력
		stdin.ReadString('\n') // 표준 입력 스트림 지우기 (줄바꿈 문자가 나올 때 까지 읽는다. 표준 입력 스트림 비우기)
	} else {
		fmt.Println(n, a, b)
	}

	n, err = fmt.Scanln(&a, &b) // 다시 입력 받기
	if err != nil {
		fmt.Println(err)
	} else {
		fmt.Println(n, a, b)
	}
}
```

> 핵심 요약
> 1. fmt 패키지를 이용해서 데이터를 표준 입출력 할 수 있다.
> 2. 표준 출력 함수로는 Print(), Printf(), Println() 이 있다.
> 3. 서식 문자를 이용하면 다양한 형식으로 출력할 수 있다. 최소 출력 너비와 소숫점 이하 숫자 개수를 지정할 수 있다.
> 4. 서식 문자를 %v로 사용하면 모든 타입의 기본 서식으로 출력한다.
> 5. 표준 입력 함수로는 Scan(), Scanf(), Scanln()이 있다.
> 6. 입력받을 때 에러가 발생하면 표준 입력 스트림을 지우자. (\n)